(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{245:function(t,e,i){"use strict";i.r(e);i(11),i(88),i(150),i(34),i(231),i(151),i(13);var a=i(0),l=i.n(a),n=i(1),s=i.n(n),o=i(2),r=i(35),c=i(5),d=i(232),p=i.n(d),m=i(12),b=i(241),u=i(62),g=i(32),f=i(26),h=i(236),v=i(237),y=i(14),x=i(242),w=i(61);const O=o.d.div.withConfig({displayName:"ArtistDetails__ArtistNameBriefWrapper",componentId:"sc-1tbiel9-0"})(["","{width:100% !important;}",":first-of-type{width:120px !important;height:18px;margin-bottom:15px;}"],w.a,w.a),A=o.d.div.withConfig({displayName:"ArtistDetails__PageBackWrapper",componentId:"sc-1tbiel9-1"})(["position:fixed;padding:25px 15px 15px 15px;top:0;left:0;width:100%;z-index:501;opacity:",";background-color:",";"],t=>t.opacity,t=>t.theme.mg),D=o.d.div.withConfig({displayName:"ArtistDetails__StyledAvatar",componentId:"sc-1tbiel9-2"})(["margin:0 auto;margin-top:35px;position:sticky;z-index:0;top:15px;display:flex;justify-content:center;"]),j=o.d.div.withConfig({displayName:"ArtistDetails__ArtistDetailsPage",componentId:"sc-1tbiel9-3"})(["padding:30px 15px 40px 15px;"]),E=o.d.div.withConfig({displayName:"ArtistDetails__StyledDesc",componentId:"sc-1tbiel9-4"})(["min-height:36px;max-height:70vh;overflow-y:scroll;margin-top:15px;font-size:16px;line-height:1.3;color:",";",""],t=>t.theme.dg,t=>t.isWhole?"line-height:1.5":Object(u.a)(2)),I=o.d.p.withConfig({displayName:"ArtistDetails__StyledName",componentId:"sc-1tbiel9-5"})(["font-size:18px;line-height:1.3;color:",";",""],t=>t.theme.fg,u.b),_=o.d.div.withConfig({displayName:"ArtistDetails__StyledDescModal",componentId:"sc-1tbiel9-6"})(["position:fixed;left:0;top:0;bottom:0;right:0;padding:35px;font-size:16px;background:",";color:",";padding-bottom:70px;transition:opacity 0.2s;opacity:",";z-index:1000;.close{position:absolute;bottom:40px;color:",";text-align:center;font-size:40px;width:100%;left:0;}"],t=>t.theme.mg,t=>t.theme.fg,t=>t.isShow?"1":"0",t=>t.theme.fg),C=o.d.div.withConfig({displayName:"ArtistDetails__ScrollContainer",componentId:"sc-1tbiel9-7"})(["position:sticky;padding-top:30px;background-color:",";z-index:5;overflow:hidden;"],t=>t.theme.mg),N=Object(a.memo)(({realArtistName:t,artistInfo:e,artistDesc:i})=>{const{isShowModal:a,isShowContent:n,onModalOpen:s,onModalClose:o}=Object(f.a)();return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement(g.b,null,l.a.createElement(_,{isShow:n},l.a.createElement(E,{isWhole:!0},i),l.a.createElement("div",{className:"close",onClick:o,"data-close":"true"},"Ã—"))),l.a.createElement(O,null,l.a.createElement(w.b,{type:"textBlock",ready:!(null==t||null==i)},t&&l.a.createElement(I,null,`${t}${e?` (${e})`:""}`),i&&l.a.createElement(E,{onClick:s},i))))});N.propTypes={realArtistName:s.a.string,artistInfo:s.a.string,artistDesc:s.a.string};const S=()=>{var t,e,i,n,s,o,d,u;const g=Object(a.useRef)(),w=Object(a.useCallback)(t=>{const e=Object(y.b)(t,0,1);return 0===e?2:e.toFixed(2)},[]),O=Object(a.useCallback)(()=>g.current,[]),E=Object(f.b)(O,w),I=Object(m.c)(t=>t.artistDetails.desc),_=Object(m.c)(t=>t.artistDetails.songs),S=Object(m.c)(t=>t.artistDetails.albums),k=Object(m.c)(t=>t.artistDetails.mvs),z=Object(m.b)(),M=Object(c.h)(),{id:F,name:V}=p.a.parse(M.search),[$,q]=Object(a.useState)(()=>{var t;return null==V||null===(t=V.split(" "))||void 0===t?void 0:t[0]});Object(a.useEffect)(()=>{const{name:t}=p.a.parse(window.location.search);q(t)},[F,z]),Object(a.useEffect)(()=>()=>{z(b.a.setAlbums(null)),z(b.a.setSONGS(null)),z(b.a.setDesc(null)),z(b.a.setMVS(null))},[z]);const{data:U}=Object(r.b)("/api/artist/desc?id="+F,b.a.requestArtistDesc,{initialData:I,revalidateOnFocus:!1}),{data:W}=Object(r.b)("/api/artists?id="+F,b.a.requestArtistSongs,{initialData:_,revalidateOnFocus:!1}),{data:B}=Object(r.b)(`/api/artist/album?id=${F}&offset=0&limit=4`,b.a.requestArtistAlbums,{initialData:S,revalidateOnFocus:!1}),{data:P}=Object(r.b)(`/api/artist/mv?id=${F}&offset=0&limit=4`,b.a.requestArtistMVs,{initialData:k,revalidateOnFocus:!1});return l.a.createElement(j,null,l.a.createElement(A,{opacity:E},l.a.createElement(v.a,{title:2!==E?$:""})),l.a.createElement(D,null,l.a.createElement(x.a,{url:null==W||null===(t=W[0][1])||void 0===t?void 0:t.img1v1Url,size:"large"})),l.a.createElement(C,{ref:g},l.a.createElement(N,{realArtistName:$,artistInfo:null==W||null===(e=W[0][1])||void 0===e||null===(i=e.alias)||void 0===i?void 0:i[0],artistDesc:U}),l.a.createElement(h.b,{moreUrl:"/artist/media?type=song&artistId="+F,title:"Song",list:null!==(n=null==W||null===(s=W[0][0])||void 0===s||null===(o=s.slice)||void 0===o?void 0:o.call(s,0,5))&&void 0!==n?n:new Array(5).fill({type:"song"})}),l.a.createElement(h.b,{moreUrl:"/artist/media?type=bigAlbum&artistId="+F,title:"Album",list:null!==(d=null==B?void 0:B[0])&&void 0!==d?d:new Array(4).fill({type:"bigAlbum"})}),l.a.createElement(h.b,{moreUrl:"/artist/media?type=biggerMV&artistId="+F,title:"MV",list:null!==(u=null==P?void 0:P[0])&&void 0!==u?u:new Array(4).fill({type:"bigMV"})})))};S.getInitialProps=async(t,e)=>{await b.a.getInitialData(t,e)},e.default=S}}]);
//# sourceMappingURL=artist-details-49290334f15b87e0f056.js.map